

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="where">
  <meta name="keywords" content="">
  
    <meta name="description" content="HTTP  &#x2F; HTTPSHTTP 1.x&#x2F; 2.0 &#x2F; 3.03.1 HTTP 常见面试题 | 小林coding (xiaolincoding.com) 先说下我们熟悉的HTTP1.0HTTP 1.0 浏览器与服务器只保持短暂的连接，每次请求都需要与服务器建立一个TCP连接 服务器完成请求处理后立即断开TCP连接，服务器不跟踪每个客户也不记录过去的请求 简单来说，就">
<meta property="og:type" content="article">
<meta property="og:title" content="HTTP&#x2F;HTTPS">
<meta property="og:url" content="http://example.com/2023/08/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/HTTP%E5%92%8CHTTPS/index.html">
<meta property="og:site_name" content="where&#39;s blog">
<meta property="og:description" content="HTTP  &#x2F; HTTPSHTTP 1.x&#x2F; 2.0 &#x2F; 3.03.1 HTTP 常见面试题 | 小林coding (xiaolincoding.com) 先说下我们熟悉的HTTP1.0HTTP 1.0 浏览器与服务器只保持短暂的连接，每次请求都需要与服务器建立一个TCP连接 服务器完成请求处理后立即断开TCP连接，服务器不跟踪每个客户也不记录过去的请求 简单来说，就">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eb2e15d3bc8347a2802ca6fc83bd4c7e~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp">
<meta property="og:image" content="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/76ca14843c4140a4864af2be371c3c5a~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dd7e7fd0c4c84c5e8fda55bf3b2d7ff1~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b42945fa8a664a41937f55d2d2b3a1b6~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp">
<meta property="og:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c22a672cf8b24fc58c8e19966cebaefb~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp">
<meta property="og:image" content="https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP/23-HTTPS%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B.png">
<meta property="og:image" content="https://ask.qcloudimg.com/http-save/yehe-6019944/s5u01dza6u.png">
<meta property="og:image" content="https://ask.qcloudimg.com/http-save/yehe-6019944/iujuyanba5.png">
<meta property="og:image" content="https://ask.qcloudimg.com/http-save/yehe-6019944/4wehmmq23x.png">
<meta property="og:image" content="https://ask.qcloudimg.com/http-save/yehe-6019944/c7x82xuisj.png">
<meta property="og:image" content="https://ask.qcloudimg.com/http-save/yehe-6019944/neg5ck6kz6.png">
<meta property="og:image" content="https://ask.qcloudimg.com/http-save/yehe-6019944/5bpp6n79z7.png">
<meta property="og:image" content="https://ask.qcloudimg.com/http-save/yehe-6019944/aoxjmcrxxo.png">
<meta property="og:image" content="https://ask.qcloudimg.com/http-save/yehe-6019944/ywweqxgx1l.png">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/1071910/201810/1071910-20181028220806744-607678230.png">
<meta property="article:published_time" content="2023-08-19T16:00:00.000Z">
<meta property="article:modified_time" content="2023-09-12T01:06:53.242Z">
<meta property="article:author" content="where">
<meta property="article:tag" content="计算机网络">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eb2e15d3bc8347a2802ca6fc83bd4c7e~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp">
  
  
  
  <title>HTTP/HTTPS - where&#39;s blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.4","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="HTTP/HTTPS"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-08-20 00:00" pubdate>
          2023年8月20日 凌晨
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          5.5k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          47 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">HTTP/HTTPS</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="HTTP-x2F-HTTPS"><a href="#HTTP-x2F-HTTPS" class="headerlink" title="HTTP  &#x2F; HTTPS"></a>HTTP  &#x2F; HTTPS</h1><h1 id="HTTP-1-x-x2F-2-0-x2F-3-0"><a href="#HTTP-1-x-x2F-2-0-x2F-3-0" class="headerlink" title="HTTP 1.x&#x2F; 2.0 &#x2F; 3.0"></a>HTTP 1.x&#x2F; 2.0 &#x2F; 3.0</h1><p><a target="_blank" rel="noopener" href="https://xiaolincoding.com/network/2_http/http_interview.html#http-1-1%E3%80%81http-2%E3%80%81http-3-%E6%BC%94%E5%8F%98">3.1 HTTP 常见面试题 | 小林coding (xiaolincoding.com)</a></p>
<h3 id="先说下我们熟悉的HTTP1-0"><a href="#先说下我们熟悉的HTTP1-0" class="headerlink" title="先说下我们熟悉的HTTP1.0"></a>先说下我们熟悉的HTTP1.0</h3><p><code>HTTP 1.0</code> 浏览器与服务器只保持短暂的连接，每次请求都需要与服务器建立一个<code>TCP</code>连接</p>
<p>服务器完成请求处理后立即断开<code>TCP</code>连接，服务器不跟踪每个客户也不记录过去的请求</p>
<p>简单来说，就是每次与服务器交互，都需要新开一个连接</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eb2e15d3bc8347a2802ca6fc83bd4c7e~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" srcset="/img/loading.gif" lazyload alt="image.png"></p>
<p> <strong>举个例子：</strong> 比如在解析<code>html</code>文件的时候，当发现文件中存在资源文件的时候，这时候又创建单独的链接。最终导致，一个<code>html</code>文件的访问包含了多次的请求和响应，每次请求都需要创建连接、关系连接。这种形式明显造成了性能上的缺陷</p>
<p><strong>在HTTP1.1中支持长连接来解决这个问题</strong> HTTP1.1是在一个TCP连接上可以传送多个<code>HTTP</code>请求和响应，减少了建立和关闭连接的消耗和延迟，建立<code>一次链接，</code>然后多次请求可以均由这个连接完成。</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/76ca14843c4140a4864af2be371c3c5a~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" srcset="/img/loading.gif" lazyload alt="image.png"></p>
<p> 这样在加载<code>html</code>文件的时候，文件中多个请求和响应就可以在一个连接中传输，减少了性能的浪费</p>
<p><code>HTTP 1.1</code>还允许客户端<code>不用等待上一次请求结果返回</code>，就可以发出<code>下一次请求</code>，但服务器端必须按照接收到客户端请求的先后顺序依次回送<code>响应结果，</code>以保证客户端能够区分出每次请求的响应内容，这样也显著地减少了整个下载过程所需要的时间</p>
<p>在<code>HTTP1.1</code>在<code>HTTP1.0</code>的基础上，增加更多的请求头和响应头来完善的功能</p>
<ul>
<li>引入了更多的缓存控制策略，如<code>If-Unmodified-Since, If-Match, If-None-Match</code>等缓存头来控制缓存策略</li>
<li>引入<code>range，</code>允许值请求资源某个部分</li>
<li>引入<code>host，</code>实现了在一台WEB服务器上可以在<code>同一个IP地址和端口号上使用不同的主机名</code>来创建多个虚拟WEB站点</li>
<li>还添加了其他的请求方法：<code>put</code>、<code>delete</code>、<code>options</code></li>
</ul>
<h3 id="HTTP2-0-高效"><a href="#HTTP2-0-高效" class="headerlink" title="HTTP2.0(高效)"></a>HTTP2.0(高效)</h3><p><code>HTTP2.0</code>在相比之前版本，性能上有很大的提升，添加了一些新特性</p>
<ul>
<li>多路复用</li>
<li>二进制分帧</li>
<li>首部压缩</li>
<li>服务器推送 <strong>多路复用</strong></li>
</ul>
<p><code>HTTP/2</code> 复用<code>TCP</code>连接，在一个连接里，客户端和浏览器都可以<strong>同时</strong>发送多个请求或回应，而且不用按照顺序一一对应，这样就避免出现阻塞现象。</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dd7e7fd0c4c84c5e8fda55bf3b2d7ff1~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" srcset="/img/loading.gif" lazyload alt="image.png"></p>
<p>咱们可以从图中看到，第4步中客户端将css和js资源是同时发送到服务端的</p>
<p><strong>二进制分帧</strong> 帧是<code>HTTP2</code>通信中最小单位信息</p>
<p><code>HTTP/2</code> 采用二进制格式传输数据，而非 <code>HTTP 1.x</code>的文本格式，解析起来更高效</p>
<p>将请求和响应数据分割为更小的帧，并且它们采用二进制编码</p>
<p><code>HTTP2</code>中，同域名下所有通信都在单个连接上完成，该连接可以承载任意数量的双向数据流</p>
<p>每个数据流都以消息的形式发送，而消息又由一个或多个帧组成。多个帧之间可以乱序发送，根据帧首部的流标识可以重新组装，这也是多路复用同时发送数据的实现条件</p>
<p><strong>首部压缩</strong></p>
<p><code>HTTP/2</code>在客户端和服务器端使用“首部表”来跟踪和存储之前发送的键值对，对于相同的数据，不再通过每次请求和响应发送</p>
<p>首部表在<code>HTTP/2</code>的连接存续期内始终存在，由客户端和服务器共同渐进地更新</p>
<p>比如下面的的两个请求， 请求一发送了所有的头部字段，第二个请求则只需要发送差异数据，这样可以减少冗余数据，降低开销</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b42945fa8a664a41937f55d2d2b3a1b6~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" srcset="/img/loading.gif" lazyload alt="image.png"></p>
<p><strong>服务器推送</strong></p>
<figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs autohotkey">HTTP2`引入服务器推送，允许服务端推送资源给客户端，服务器会顺便把一些客户端需要的资源一起推送到客户端，如在响应一个页面请求中，就可以带上页面的其它资源，避免客户端再次创建连接发送请求到服务器端获取。`这种方式非常合适加载静态资源<br></code></pre></td></tr></table></figure>

<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c22a672cf8b24fc58c8e19966cebaefb~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" srcset="/img/loading.gif" lazyload alt="image.png"></p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p><strong>HTTP1.0</strong></p>
<ul>
<li>浏览器与服务器只保持短暂的连接，浏览器的每次请求都需要与服务器建立一个TCP连接 <strong>HTTP1.1</strong></li>
<li>引入了持久连接，即TCP连接默认不关闭，可以被多个请求复用</li>
<li>在同一个TCP连接里面，客户端可以同时发送多个请求</li>
<li>虽然允许复用TCP连接，但是同一个TCP连接里面，所有的数据通信是按次序进行的，服务器只有处理完一个请求，才会接着处理下一个请求。如果前面的处理需要时间特别长特别慢，后面的请求只能排队等着</li>
<li>新增了一些请求方法<code>put</code>、<code>delete</code>、<code>options</code></li>
<li>新增了一些请求头和响应头 <strong>HTTP2.0</strong></li>
<li>采用二进制格式而非文本格式</li>
<li>完全多路复用，而非有序并阻塞的、只需一个连接即可实现并行</li>
<li>使用报头压缩，降低开销</li>
<li>服务器可以推送</li>
</ul>
<p>作者：二十世纪末的程序员<br>链接：<a target="_blank" rel="noopener" href="https://juejin.cn/post/7089068858241515551">https://juejin.cn/post/7089068858241515551</a><br>来源：稀土掘金<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
<h1 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h1><p><a target="_blank" rel="noopener" href="https://xiaolincoding.com/network/2_http/http_interview.html#https-%E6%98%AF%E5%A6%82%E4%BD%95%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5%E7%9A%84-%E5%85%B6%E9%97%B4%E4%BA%A4%E4%BA%92%E4%BA%86%E4%BB%80%E4%B9%88">3.1 HTTP 常见面试题 | 小林coding (xiaolincoding.com)</a></p>
<p><img src="https://cdn.xiaolincoding.com/gh/xiaolincoder/ImageHost/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP/23-HTTPS%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B.png" srcset="/img/loading.gif" lazyload alt="HTTPS 连接建立过程"></p>
<h2 id="TCP-建立连接过程"><a href="#TCP-建立连接过程" class="headerlink" title="TCP 建立连接过程"></a><strong>TCP 建立连接过程</strong></h2><p><img src="https://ask.qcloudimg.com/http-save/yehe-6019944/s5u01dza6u.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<h2 id="HTTPS-的连接建立过程"><a href="#HTTPS-的连接建立过程" class="headerlink" title="HTTPS 的连接建立过程"></a><strong>HTTPS 的连接建立过程</strong></h2><h3 id="HTTPS-是啥"><a href="#HTTPS-是啥" class="headerlink" title="HTTPS 是啥"></a><strong>HTTPS 是啥</strong></h3><p>HTTP 是明文传输，意味着端到端之间的任意节点都知道内容是消息传输内容是啥，这些节点可以是 路由器，代理等。</p>
<p>HTTPS 就是来解决这个问题的，以安全为目的的 HTTP 通道，全称是 Hyper Text Transfer Protocol</p>
<p><img src="https://ask.qcloudimg.com/http-save/yehe-6019944/iujuyanba5.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<h3 id="SSL-TLS-是啥"><a href="#SSL-TLS-是啥" class="headerlink" title="SSL TLS 是啥"></a><strong>SSL TLS 是啥</strong></h3><p>SSL (secure Sockets Layer 安全套接字)</p>
<p>TLS(Transport Layer security， TLS) 是为了网络通信提供安全与数据弯针行的一种安全协议。TLS&#x2F;SSL 在传输网络层连接进行加密。TLS&#x2F;SSL 是安全传输层协议 Transporter Layer Security 是介于 TCP 和 Http 之间的一层安全协议, 不影响原有的 TCP 协议和 Http 协议。</p>
<h2 id="身份验证-CA-和证书之间的关系"><a href="#身份验证-CA-和证书之间的关系" class="headerlink" title="身份验证 CA 和证书之间的关系"></a><strong>身份验证 CA 和证书之间的关系</strong></h2><ul>
<li>服务方S向第三方机构CA提交公钥、组织信息、个人信息(域名)等信息并申请认证;</li>
<li>CA通过线上、线下等多种手段验证申请者提供信息的真实性，如组织是否存在、企业是否合法，是否拥有域名的所有权等;</li>
<li>如信息审核通过，CA会向申请者签发认证文件-证书；</li>
</ul>
<ol>
<li>证书包含以下信息：申请者公钥、申请者的组织信息和个人信息、签发机构 CA的信息、有效时间、证书序列号等信息的明文，同时包含一个签名;</li>
<li>签名的产生算法：首先，使用散列函数计算公开的明文信息的信息摘要，然后，采用 CA的私钥对信息摘要进行加密，密文即签名;</li>
</ol>
<ul>
<li>客户端 C 向<a target="_blank" rel="noopener" href="https://cloud.tencent.com/product/cvm?from_column=20420&from=20420">服务器</a> S 发出请求时，S 返回证书文件;</li>
<li>客户端 C读取证书中的相关的明文信息，采用相同的散列函数计算得到信息摘要，然后，利用对应 CA的公钥解密签名数据，对比证书的信息摘要，如果一致，则可以确认证书的合法性，即公钥合法;</li>
<li>客户端然后验证证书相关的域名信息、有效时间等信息;</li>
<li>客户端会内置信任CA的证书信息(包含公钥)，如果CA不被信任，则找不到对应 CA的证书，证书也会被判定非法。</li>
</ul>
<p><img src="https://ask.qcloudimg.com/http-save/yehe-6019944/4wehmmq23x.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p>需要注意如下:</p>
<ol>
<li>申请证书不需要提供私钥，确保私钥永远只能服务器掌握;</li>
<li>证书的合法性仍然依赖于非对称加密算法，证书主要是增加了服务器信息以及签名;</li>
<li>内置 CA 对应的证书称为根证书，颁发者和使用者相同，自己为自己签名，即自签名证书（为什么说”部署自签<a target="_blank" rel="noopener" href="https://cloud.tencent.com/product/ssl?from_column=20420&from=20420">SSL证书</a>非常不安全”）</li>
<li>证书&#x3D;公钥+申请者与颁发者信息+签名;</li>
</ol>
<h2 id="HTTP-单向认证"><a href="#HTTP-单向认证" class="headerlink" title="HTTP 单向认证"></a><strong>HTTP 单向认证</strong></h2><p>单向认证是指：客户端连接到某个域名或者 IP 时 ,客户端协议验证服务器的身份。服务器的身份一般是通过证书认证的，服务器的整数，一般都是通过权威的 CA 机构进行签名，客户端收到服务器证书后，获取对应的 CA 机构的证书，并使用 CA 证书进行解密。</p>
<h3 id="身份认证过程"><a href="#身份认证过程" class="headerlink" title="身份认证过程"></a><strong>身份认证过程</strong></h3><p><img src="https://ask.qcloudimg.com/http-save/yehe-6019944/c7x82xuisj.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<h2 id="连接过程"><a href="#连接过程" class="headerlink" title="连接过程"></a><strong>连接过程</strong></h2><p><img src="https://ask.qcloudimg.com/http-save/yehe-6019944/neg5ck6kz6.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p><img src="https://ask.qcloudimg.com/http-save/yehe-6019944/5bpp6n79z7.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<h2 id="HTTPS-双向认证"><a href="#HTTPS-双向认证" class="headerlink" title="HTTPS 双向认证"></a><strong>HTTPS 双向认证</strong></h2><p>https 双向认证指除了客户端需要验证服务器之外，服务器也需要验证客户端</p>
<p><img src="https://ask.qcloudimg.com/http-save/yehe-6019944/aoxjmcrxxo.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p><img src="https://ask.qcloudimg.com/http-save/yehe-6019944/ywweqxgx1l.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a><strong>参考资料</strong></h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/evan-blog/p/9867561.html">https://www.cnblogs.com/evan-blog/p/9867561.html</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/hei12138/p/13228981.html">https://www.cnblogs.com/hei12138/p/13228981.html</a></li>
</ul>
<h3 id="TLS-x2F-SSL握手过程"><a href="#TLS-x2F-SSL握手过程" class="headerlink" title="TLS&#x2F;SSL握手过程"></a>TLS&#x2F;SSL握手过程</h3><p>基于RSA握手和密钥交换的客户端验证服务器为示例详解TLS&#x2F;SSL握手过程：</p>
<p><img src="https://img2018.cnblogs.com/blog/1071910/201810/1071910-20181028220806744-607678230.png" srcset="/img/loading.gif" lazyload alt="img"></p>
<p><strong>第一步 client_hello</strong></p>
<p>客户端发起请求，以明文传输请求信息，包含版本信息，加密套件候选列表，压缩算法候选列表，随机数，扩展字段等信息，相关信息如下：</p>
<ul>
<li>支持的最高TSL协议版本version，从低到高依次 SSLv2 SSLv3 TLSv1 TLSv1.1 TLSv1.2，当前基本不再使用低于 TLSv1 的版本;</li>
<li>客户端支持的加密套件 cipher suites 列表， 每个加密套件对应前面 TLS 原理中的四个功能的组合：认证算法 Au (身份验证)、密钥交换算法 KeyExchange(密钥协商)、对称加密算法 Enc (信息加密)和信息摘要 Mac(完整性校验);</li>
<li>支持的压缩算法 compression methods 列表，用于后续的信息压缩传输;</li>
<li>随机数 random_C，用于后续的密钥的生成;</li>
<li>扩展字段 extensions，支持协议与算法的相关参数以及其它辅助信息等，常见的 SNI 就属于扩展字段，后续单独讨论该字段作用。</li>
</ul>
<p><strong>第二步 server_hello+server_certificate+sever_hello_done</strong></p>
<ul>
<li>server_hello, 服务端返回协商的信息结果，包括选择使用的协议版本 version，选择的加密套件 cipher suite，选择的压缩算法 compression method、随机数 random_S 等，其中随机数用于后续的密钥协商;</li>
<li>server_certificates, 服务器端配置对应的证书链，用于身份验证与密钥交换;</li>
<li>server_hello_done，通知客户端 server_hello 信息发送结束;</li>
</ul>
<p><strong>第三步 证书校验</strong></p>
<p>客户端验证证书的合法性，如果验证通过才会进行后续通信，否则根据错误情况不同做出提示和操作，合法性验证包括如下：</p>
<ul>
<li>[证书链]的可信性 trusted certificate path，方法如前文所述;</li>
<li>证书是否吊销 revocation，有两类方式离线 CRL 与<strong>在线</strong> <strong>OCSP</strong>，不同的客户端行为会不同;</li>
<li>有效期 expiry date，证书是否在有效时间范围;</li>
<li>域名 domain，核查证书域名是否与当前的访问域名匹配，匹配规则后续分析;</li>
</ul>
<p><strong>第四步 client_key_exchange+change_cipher_spec+encrypted_handshake_message</strong></p>
<ul>
<li>client_key_exchange，合法性验证通过之后，客户端计算产生随机数字 Pre-master，并用证书公钥加密，发送给服务器;</li>
<li>此时客户端已经获取全部的计算协商密钥需要的信息：两个明文随机数 random_C 和 random_S 与自己计算产生的 Pre-master，计算得到协商密钥; enc_key&#x3D;Fuc(random_C, random_S, Pre-Master)</li>
<li>change_cipher_spec，客户端通知服务器后续的通信都采用协商的通信密钥和加密算法进行加密通信;</li>
<li>encrypted_handshake_message，结合之前所有通信参数的 hash 值与其它相关信息生成一段数据，采用协商密钥 session secret 与算法进行加密，然后发送给服务器用于数据与握手验证;</li>
</ul>
<p><strong>第五步 change_cipher_spec+encrypted_handshake_message</strong></p>
<ul>
<li>服务器用私钥解密加密的 Pre-master 数据，基于之前交换的两个明文随机数 random_C 和 random_S，计算得到协商密钥:enc_key&#x3D;Fuc(random_C, random_S, Pre-Master);</li>
<li>计算之前所有接收信息的 hash 值，然后解密客户端发送的 encrypted_handshake_message，验证数据和密钥正确性;</li>
<li>change_cipher_spec, 验证通过之后，服务器同样发送 change_cipher_spec 以告知客户端后续的通信都采用协商的密钥与算法进行加密通信;</li>
<li>encrypted_handshake_message, 服务器也结合所有当前的通信参数信息生成一段数据并采用协商密钥session secret 与算法加密并发送到客户端;</li>
</ul>
<p><strong>第六步 握手结束</strong></p>
<p>客户端计算所有接收信息的 hash 值，并采用协商密钥解密 encrypted_handshake_message，验证服务器发送的数据和密钥，验证通过则握手完成;</p>
<p><strong>第七步 加密通信</strong></p>
<p>开始使用协商密钥与算法进行加密通信。</p>
<h1 id="HTTP状态码"><a href="#HTTP状态码" class="headerlink" title="HTTP状态码"></a>HTTP状态码</h1><p>HTTP状态码是在HTTP协议中用于表示服务器对请求的处理结果的三位数字代码。每个状态码都有特定的含义，用于指示请求的成功、重定向、客户端错误或服务器错误等情况。以下是一些常见的HTTP状态码及其含义：</p>
<ol>
<li><p>200 OK：请求成功。服务器成功处理了请求，并返回了请求的内容。</p>
</li>
<li><p>201 Created：请求已成功，并且服务器创建了新的资源。</p>
</li>
<li><p>204 No Content：服务器成功处理了请求，但没有返回任何内容。</p>
</li>
<li><p>301 Moved Permanently：请求的资源已永久移动到新的URL。客户端应该使用新的URL进行后续的请求。</p>
</li>
<li><p>302 Found：请求的资源临时移动到了新的URL。客户端应该继续使用原始URL进行后续的请求。</p>
</li>
<li><p>400 Bad Request：客户端发送的请求有错误，服务器无法理解。</p>
</li>
<li><p>401 Unauthorized：请求需要身份验证。客户端需要提供有效的身份验证信息才能访问请求的资源。</p>
</li>
<li><p>403 Forbidden：服务器拒绝了请求，因为客户端没有访问权限。</p>
</li>
<li><p>404 Not Found：请求的资源不存在。</p>
</li>
<li><p>500 Internal Server Error：服务器在处理请求时发生了错误。</p>
</li>
</ol>
<p>这只是一小部分常见的HTTP状态码，实际上还有很多其他状态码，每个状态码都有其特定的含义。了解HTTP状态码可以帮助开发人员诊断和调试与服务器通信时可能出现的问题。如果需要更详细的信息，可以使用搜索引擎进行进一步的查询。</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" class="category-chain-item">计算机基础</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">#计算机网络</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>HTTP/HTTPS</div>
      <div>http://example.com/2023/08/20/计算机基础/HTTP和HTTPS/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>where</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2023年8月20日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/08/24/%E5%B7%A5%E5%85%B7/MySQL-%E4%B8%9A%E5%8A%A1/" title="MySQL 业务">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">MySQL 业务</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/08/07/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/2023-08-7-JUC%E9%9D%A2%E8%AF%95%E9%A2%98/" title="JUC面试题">
                        <span class="hidden-mobile">JUC面试题</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
